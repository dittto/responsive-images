document.createElement("responsive-image");var responsiveImage={config:{className:"responsive",lazyDelay:200,useNoScript:false,"default":{sizes:[320,480,720,1e5],fileNames:{320:320,480:480,720:720,1e5:1e5},imagePath:"^(.+\\-)(\\d+)(\\.[a-z]+)$",imagePathSizeField:2,lazy:true,lazyPrePx:200}},screenWidth:document.documentElement.clientWidth,scrollbarWidth:0,hasInited:false,allowLazyUpdate:true,forcedScrollUpdate:true,Init:function(e){this.config=this.UpdateConfig(e);this.CalcScrollWidth();this.InitEvents()},InitEvents:function(){if(typeof window.attachEvent==="object"){window.attachEvent("onresize",this.Resize);window.attachEvent("onload",this.Resize);window.attachEvent("onscroll",this.Scroll)}else{window.addEventListener("resize",this.Resize,false);window.addEventListener("load",this.Resize,false);window.addEventListener("scroll",this.Scroll,false)}},UpdateConfig:function(e){var t,n,r={},i;if(typeof e!=="object"){e={}}if(e.default===undefined){e.default=this.config.default}i=function(e,t){return e-t};for(t in e){if(e.hasOwnProperty(t)&&typeof e[t]==="object"){if(e[t].fileNames===undefined&&e[t].sizes!==undefined){for(n in e[t].sizes){if(e[t].sizes.hasOwnProperty(n)){r[e[t].sizes[n]]=e[t].sizes[n]}}e[t].fileNames=r}if(e[t].sizes===undefined){e[t].sizes=this.config.default.sizes}if(e[t].fileNames===undefined){e[t].fileNames=this.config.default.fileNames}if(e[t].imagePath===undefined){e[t].imagePath=this.config.default.imagePath}if(e[t].imagePathSizeField===undefined){e[t].imagePathSizeField=this.config.default.imagePathSizeField}if(e[t].lazy===undefined){e[t].lazy=this.config.default.lazy}if(e[t].lazyPrePx===undefined){e[t].lazyPrePx=this.config.default.lazyPrePx}e[t].sizes.sort(i)}}if(e.className===undefined){e.className=this.config.className}if(e.lazyDelay===undefined){e.lazyDelay=this.config.lazyDelay}if(e.useNoScript===undefined){e.useNoScript=this.config.useNoScript}return e},GetOptions:function(e){var t="",n,r,i,s,o;n=e.split(" ");for(r in n){if(n.hasOwnProperty(r)){i=n[r].replace(/^\s+|\s+$/g,"");if(t===""&&i===this.config.className){t="default"}s=new RegExp("^"+this.config.className+"-","g");o=i.replace(s,"");if(this.config[o]!==undefined){t=o}}}return t===""?null:this.config[t]},CalcScrollWidth:function(){if(this.scrollbarWidth===0){var e=document.createElement("div");e.style.width="200px";e.style.overflow="scroll";document.body.appendChild(e);if(e.offsetWidth&&e.clientWidth&&!(new RegExp(" AppleWebKit/")).test(navigator.userAgent)){this.scrollbarWidth=e.offsetWidth-e.clientWidth}e.parentNode.removeChild(e)}},Resize:function(e){var t,n=responsiveImage;t=document.documentElement.clientWidth+n.scrollbarWidth;e=n.hasInited===false||e===true?true:false;n.hasInited=true;if(n.screenWidth===t&&!e){return}n.screenWidth=t;n.Rebuild();n.Scroll()},Rebuild:function(){var e,t,n,r,i,s,o,u;e=document.getElementsByTagName(this.config.useNoScript?"noscript":"responsive-image");for(t=0;t<e.length;t++){n=e[t];r=this.GetOptions(n.className);if(!r){continue}i=this.GetBoundary(n,r);s="data-"+this.config.className+"-";if(!n.getAttribute(s+"image-id")){n.setAttribute(s+"image-id",s+"image-"+Math.floor(Math.random()*1e7))}if(r.lazy===true&&!n.getAttribute(s+"lazy")){n.setAttribute(s+"lazy",String(r.lazyPrePx))}o=document.getElementById(n.getAttribute(s+"image-id"));if(o){if(parseInt(o.getAttribute(s+"used-size"),10)===parseInt(i.size,10)){continue}o.parentNode.removeChild(o);n.removeAttribute(s+"lazy-loaded")}u=document.createElement("img");if(i.alt!==undefined){u.setAttribute("alt",i.alt)}if(i.title!==undefined){u.setAttribute("title",i.title)}if(i.class!==undefined){u.setAttribute("class",i.class)}u.setAttribute("id",n.getAttribute(s+"image-id"));u.setAttribute(s+"used-size",i.size);if(r.lazy){u.setAttribute(s+"lazy-src",i.src)}else{u.setAttribute("src",i.src)}n.parentNode.insertBefore(u,n)}},GetBoundary:function(e,t){var n,r,i,s,o,u,a,f="";n=t.sizes[t.sizes.length-1];for(r in t.sizes){if(t.sizes.hasOwnProperty(r)){r=parseInt(t.sizes[r],10);if(this.screenWidth<=r&&n>=r){n=r}}}if(this.config.useNoScript){i=document.createElement("div");i.innerHTML=e.childNodes[0].data;s=i.getElementsByTagName("img")[0];o=s.src}else{s=e;o=e.getAttribute("data-src")}u=/^(.+\-)(\d+)(\.[a-z]+)$/.exec(o);for(a=1;a<u.length;a++){if(a===t.imagePathSizeField){f+=t.fileNames[n]}else{f+=u[a]}}return{size:n,src:f,alt:s.getAttribute("alt"),title:s.getAttribute("title"),"class":s.getAttribute("data-class")}},Scroll:function(){var e,t,n,r,i,s,o,u=responsiveImage;if(u.allowLazyUpdate===false){return}u.allowLazyUpdate=false;n=window.innerHeight||document.documentElement.clientHeight;if(typeof document.getElementsByClassName==="function"){e=document.getElementsByClassName(u.config.className)}else{e=document.getElementsByTagName(this.config.useNoScript?"noscript":"responsive-image")}if(u.forcedScrollUpdate){o=window.setInterval(function(){if(document.documentElement.scrollTop!==0){window.clearInterval(o);u.allowLazyUpdate=true;u.forcedScrollUpdate=false;u.Scroll()}else{u.forcedScrollUpdate=false}},50)}r="data-"+u.config.className+"-";for(t=0;t<e.length;t++){if(e[t].getAttribute(r+"lazy")&&!e[t].getAttribute(r+"lazy-loaded")){i=document.getElementById(e[t].getAttribute(r+"image-id")).getBoundingClientRect();if(i.top-parseInt(e[t].getAttribute(r+"lazy"),10)<=n){s=document.getElementById(e[t].getAttribute(r+"image-id"));s.setAttribute("src",s.getAttribute(r+"lazy-src"));e[t].setAttribute(r+"lazy-loaded","1")}}}window.setTimeout(function(){u.allowLazyUpdate=true;u.Scroll()},u.config.lazyDelay)}}